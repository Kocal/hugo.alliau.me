@import "tailwindcss";
@source not "../../public";

@theme {
    --font-sans: "Inter var", "Inter Variable Fallback", "ui-sans-serif", "system-ui", "sans-serif", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI", "Symbol", "Noto Color Emoji";
    --font-sans--font-feature-settings: "cv02", "cv03", "cv04", "cv11";

    --color-primary-50: var(--color-pink-50);
    --color-primary-500: var(--color-pink-500);
    --color-primary-600: var(--color-pink-600);
    --color-primary-700: var(--color-pink-700);
    --color-primary-800: var(--color-pink-800);

    --color-bsky: #0a7aff;
    --color-github: #181717;
    --color-twitter: #00acee;
    --color-linkedin: #0077b5;
    --color-mastodon: #5c4adf;

    --terminal-text-color: var(--color-gray-50);
    --terminal-bg-color: var(--color-gray-800);
    --terminal-header-bg-color: var(--color-gray-900);
    --terminal-border-radius: var(--radius-lg);
    --terminal-body-padding: --spacing(3);
}

@layer base {
    @font-face {
        font-family: Inter var;
        font-weight: 100 900;
        font-display: swap;
        font-style: normal;
        font-named-instance: "Regular";
        src: url('../vendor/inter-ui/variable/InterVariable.woff2') format("woff2")
    }
    @font-face {
        font-family: Inter var;
        font-weight: 100 900;
        font-display: swap;
        font-style: italic;
        font-named-instance: "Regular";
        src: url('../vendor/inter-ui/variable/InterVariable-Italic.woff2') format("woff2")
    }
}

@layer components {
    .prose {
        font-size: var(--text-xl);
        line-height: --spacing(10);

        h2 {
            font-size: var(--text-4xl);
            margin: --spacing(10) 0;
        }

        h3 {
            font-size: var(--text-3xl);
            margin: --spacing(8) 0;
        }

        p, .CustomContainer, .Terminal {
            margin-top: --spacing(5);
            margin-bottom: --spacing(5);
        }

        code {
            color: var(--terminal-text-color) !important;
            background-color: var(--terminal-bg-color) !important;
            padding: --spacing(1);
            border-radius: var(--terminal-border-radius);
            overflow-wrap: break-word;
            font-size: 90%
        }

        h2 + *, h3 + * {
            margin-top: 0;
        }

        & > :first-child {
            margin-top: 0;
        }

        & > :last-child {
            margin-bottom: 0;
        }
    }
}

@layer components {
    .CustomContainer {
        --custom-container-color: theme('colors.gray.900');
        --custom-container-bg-color: theme('colors.gray.100');

        padding: theme('spacing.3');
        border-radius: theme('borderRadius.md');
        color: var(--custom-container-color);
        background-color: var(--custom-container-bg-color);
    }

    .CustomContainer * {
        color: inherit;
    }

    .CustomContainer__Title {
        margin: theme('spacing.0') theme('spacing.0') theme('spacing.2') theme('spacing.0');
        text-transform: uppercase;
        font-weight: theme('fontWeight.bold');
        font-size: theme('fontSize.sm');
    }

    .CustomContainer--info {
        --custom-container-color: theme('colors.blue.900');
        --custom-container-bg-color: theme('colors.blue.100');

        @media (prefers-color-scheme: dark) {
            --custom-container-color: theme('colors.blue.100');
            --custom-container-bg-color: theme('colors.blue.900');
        }
    }

    .CustomContainer--tip {
        --custom-container-color: theme('colors.green.900');
        --custom-container-bg-color: theme('colors.green.100');

        @media (prefers-color-scheme: dark) {
            --custom-container-color: theme('colors.green.100');
            --custom-container-bg-color: theme('colors.green.900');
        }
    }

    .CustomContainer--warning {
        --custom-container-color: theme('colors.yellow.900');
        --custom-container-bg-color: theme('colors.yellow.100');

        @media (prefers-color-scheme: dark) {
            --custom-container-color: theme('colors.yellow.100');
            --custom-container-bg-color: theme('colors.yellow.900');
        }
    }

    .CustomContainer--danger {
        --custom-container-color: theme('colors.red.900');
        --custom-container-bg-color: theme('colors.red.100');

        @media (prefers-color-scheme: dark) {
            --custom-container-color: theme('colors.red.100');
            --custom-container-bg-color: theme('colors.red.900');
        }
    }
}

@layer components {
    .heading-permalink {
        transform: translate3d(-100%, -50%, 0);
        color: theme('colors.gray.500');
        text-decoration: none !important;
        margin-right: theme('spacing.1');

        &:before {
            content: '#';
        }
    }

    *:hover > & {
        opacity: 1;
    }

    @media screen(md) {
        .heading-permalink {
            position: absolute;
            opacity: 0;
            top: 50%;
            transition: opacity 0.2s;
            margin-right: 0;
        }
    }
}

@layer components {
    pre {
        max-height: 100dvh;
        overflow: auto;

        .hl-addition {
            --hl-color: var(--color-green-500);
        }

        .hl-deletion {
            --hl-color: var(--color-red-500);
        }

        .hl-addition, .hl-deletion {
            background-color: color-mix(in oklab, var(--hl-color) 25%, transparent) !important;
            position: relative;

            &:before {
                content: ' ';
                position: absolute;
                right: 100%;
                top: 0;
                bottom: 0;
                width: var(--terminal-body-padding);
                background-color: var(--hl-color);
            }
        }
    }
}

@layer components {
    .Terminal {
        color: var(--terminal-text-color);
        background-color: var(--terminal-bg-color);
        border-radius: var(--terminal-border-radius);
        font-size: var(--text-base);
        line-height: --spacing(6);
    }

    .Terminal__Header {
        background-color: var(--terminal-header-bg-color);
        border-radius: var(--terminal-border-radius) var(--terminal-border-radius) 0 0;
        font-family: theme('fontFamily.mono');
        font-size: theme('fontSize.sm');
        font-weight: bold;
        padding: theme('spacing.1') theme('spacing.2');
        text-overflow: ellipsis;
        overflow: hidden;
    }

    .Terminal__Body {
        padding: var(--terminal-body-padding);

        > pre {
            color: var(--terminal-text-color) !important;
            background-color: transparent !important;
        }
    }
}
